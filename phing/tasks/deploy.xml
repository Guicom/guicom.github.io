<project name="deploy" default="update">

  <target
    name="deploy:install"
    description="Install the website and set up environment."
    depends="install, project:create-content, megamenu-socomec:import, solr:cr, gulp-socomec:install, gulp-socomec:css, gulp-socomec:clear-cache, cache-clear:all"/>

  <target name="deploy:update">
    <phingcall target="project:updates" />
    <drush
      command="csex"
      assume="yes"
      root="${website.drupal.dir}"
      verbose="${drush.verbose}"
      uri="${multisite.uri}"
    >
      <param>overrides</param>
    </drush>
    <phingcall target="update" />
  </target>

  <target name="deploy:update-hub">
    <drush
      command="csex"
      assume="yes"
      root="${website.drupal.dir}"
      verbose="${drush.verbose}"
      uri="${multisite.uri}"
    >
      <param>contenthub</param>
    </drush>
    <phingcall target="update" />
  </target>

</project>
