services:
  soc_nextpage.nextpage_api:
    class: Drupal\soc_nextpage\Service\NextpageApi
    arguments:
      ['@logger.factory', '@config.factory', '@tempstore.shared']
  soc_nextpage.nextpage_base_api:
    class: Drupal\soc_nextpage\Service\NextpageBaseApi
    parent: soc_core.base_api
    arguments: ['@config.factory', '@tempstore.shared']
  soc_nextpage.nextpage_item_handler:
    class: Drupal\soc_nextpage\Service\NextpageItemHandler
    arguments: ['@soc_nextpage.nextpage_api', '@database']
  soc_nextpage.nextpage_reference_manager:
    class: Drupal\soc_nextpage\Service\Manager\ReferenceManager
    arguments: ['@soc_nextpage.nextpage_api', '@soc_nextpage.nextpage_item_handler', '@soc_rollback.rollback_import', '@logger.factory']
  soc_nextpage.nextpage_product_manager:
    class: Drupal\soc_nextpage\Service\Manager\ProductManager
    arguments: ['@soc_nextpage.nextpage_reference_manager', '@soc_nextpage.nextpage_api', '@soc_nextpage.nextpage_item_handler', '@soc_rollback.rollback_import', '@logger.factory']
  soc_nextpage.nextpage_family_manager:
    class: Drupal\soc_nextpage\Service\Manager\FamilyManager
    arguments: ['@soc_nextpage.nextpage_api', '@soc_nextpage.nextpage_item_handler', '@soc_rollback.rollback_import', '@logger.factory']
  soc_nextpage.twig.extension:
    arguments: ['@renderer']
    class: Drupal\soc_nextpage\TwigExtension\NextpageTwig
    tags:
      - { name: twig.extension}
  soc_nextpage.product_reference_table:
    arguments: ['@module_handler','@renderer']
    class: Drupal\soc_nextpage\Service\ProductReferenceTable
  soc_nextpage.product_reference:
    arguments: ['@entity.query', '@database']
    class: Drupal\soc_nextpage\Service\ProductReference
  soc_nextpage.product_reference_breadcrumb:
    arguments: ['@soc_nextpage.product_reference']
    class: Drupal\soc_nextpage\Service\Breadcrumb\SocBreadcrumbProductReference
    tags:
      - { name: breadcrumb_builder, priority: 100 }
  soc_nextpage.rollback_import:
    class: Drupal\soc_nextpage\Service\RollbackImport
    arguments: ['@soc_heartbeat.heartmanager', '@soc_nextpage.nextpage_item_handler', '@database']
